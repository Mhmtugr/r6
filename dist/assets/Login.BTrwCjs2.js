var e=Object.defineProperty,a=(a,l)=>e(a,"name",{value:l,configurable:!0});import{a as l,r,i as s,j as i,k as t,t as o,G as n,C as d,D as u,S as p,p as m,I as c,m as v,u as b,l as f}from"./vendor-vue.Cn8zEwKq.js";import{_ as y,b as g}from"./index.DR3g4u-R.js";import"./vendor-firebase.4azA1Kf8.js";import"./vendor-chart.By1hop_s.js";const h={class:"login-page"},k={class:"login-container"},w={class:"login-form-container"},x={class:"login-title"},U={key:0,class:"alert alert-danger"},V={key:1,class:"alert alert-danger"},q={class:"form-group"},K={class:"form-group"},M={class:"password-input-container"},S=["type"],j={class:"form-check mb-3"},G=["disabled"],L={key:0},C={key:1},E={class:"form-group"},_={class:"form-group"},z={class:"form-group"},A={class:"form-group"},O={class:"form-group"},P={class:"password-input-container"},D=["type"],R=["disabled"],Y={key:0},I={key:1},T={class:"login-footer"},B=y({__name:"Login",setup(e){const y=b(),B=g(),F=l({email:"",password:"",rememberMe:!1}),H=r(""),J=r(!1),N=r(!1),Q=r(!1),W=l({name:"",email:"",username:"",department:"",password:""}),X=r(""),Z=a((async()=>{try{J.value=!0,H.value="";const e=await B.login(F);if(!e.success)return void(H.value=e.error||"E-posta veya şifre hatalı.");const a=y.currentRoute.value.query.redirect||"/";y.push(a)}catch(e){H.value=e.message||"Giriş yapılamadı. Lütfen bilgilerinizi kontrol edin."}finally{J.value=!1}}),"handleLogin"),$=a((()=>{N.value=!N.value}),"togglePasswordVisibility"),ee=a((async()=>{if(F.email)try{J.value=!0,await B.resetPassword(F.email),alert("Şifre sıfırlama bağlantısı email adresinize gönderildi.")}catch(e){H.value="Şifre sıfırlama bağlantısı gönderilemedi. Lütfen tekrar deneyin."}finally{J.value=!1}else H.value="Lütfen şifre sıfırlama için email adresinizi giriniz."}),"forgotPassword"),ae=a((()=>{Q.value=!Q.value,H.value="",X.value=""}),"toggleRegister"),le=a((async()=>{try{J.value=!0,X.value="";const e=await B.register(W);e.success||(X.value=e.error||"Kayıt sırasında hata oluştu.")}catch(e){X.value=e.message||"Kayıt yapılamadı."}finally{J.value=!1}}),"handleRegister");return(e,a)=>(f(),s("div",h,[i("div",k,[a[18]||(a[18]=i("div",{class:"login-logo-container"},[i("img",{src:"data:image/png;base64,",alt:"METS Logo",class:"login-logo"})],-1)),i("div",w,[i("h1",x,o(Q.value?"Kayıt Ol":"Giriş Yap"),1),H.value&&!Q.value?(f(),s("div",U,o(H.value),1)):t("",!0),X.value&&Q.value?(f(),s("div",V,o(X.value),1)):t("",!0),Q.value?(f(),s("form",{key:3,onSubmit:n(le,["prevent"]),class:"register-form"},[i("div",E,[a[12]||(a[12]=i("label",{for:"name"},"Ad Soyad",-1)),d(i("input",{type:"text",id:"name","onUpdate:modelValue":a[3]||(a[3]=e=>W.name=e),class:"form-control",required:"",placeholder:"Ad Soyad"},null,512),[[u,W.name]])]),i("div",_,[a[13]||(a[13]=i("label",{for:"email"},"E-posta",-1)),d(i("input",{type:"text",id:"email","onUpdate:modelValue":a[4]||(a[4]=e=>W.email=e),class:"form-control",required:"",placeholder:"ornek@sirket.com"},null,512),[[u,W.email]])]),i("div",z,[a[14]||(a[14]=i("label",{for:"username"},"Kullanıcı Adı",-1)),d(i("input",{type:"text",id:"username","onUpdate:modelValue":a[5]||(a[5]=e=>W.username=e),class:"form-control",required:"",placeholder:"Kullanıcı Adı"},null,512),[[u,W.username]])]),i("div",A,[a[15]||(a[15]=i("label",{for:"department"},"Departman",-1)),d(i("input",{type:"text",id:"department","onUpdate:modelValue":a[6]||(a[6]=e=>W.department=e),class:"form-control",required:"",placeholder:"Departman"},null,512),[[u,W.department]])]),i("div",O,[a[16]||(a[16]=i("label",{for:"password"},"Şifre",-1)),i("div",P,[d(i("input",{type:N.value?"text":"password",id:"password","onUpdate:modelValue":a[7]||(a[7]=e=>W.password=e),class:"form-control",required:"",placeholder:"******"},null,8,D),[[p,W.password]]),i("button",{type:"button",class:"password-toggle-btn",onClick:$},[i("i",{class:m(N.value?"bi bi-eye-slash":"bi bi-eye")},null,2)])])]),i("button",{type:"submit",class:"btn btn-primary register-btn w-100",disabled:J.value},[J.value?(f(),s("span",Y,a[17]||(a[17]=[i("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1),v(" Kayıt yapılıyor... ")]))):(f(),s("span",I,"Kayıt Ol"))],8,R)],32)):(f(),s("form",{key:2,onSubmit:n(Z,["prevent"]),class:"login-form"},[i("div",q,[a[8]||(a[8]=i("label",{for:"email"},"E-posta",-1)),d(i("input",{type:"text",id:"email","onUpdate:modelValue":a[0]||(a[0]=e=>F.email=e),class:"form-control",required:"",placeholder:"ornek@sirket.com"},null,512),[[u,F.email]])]),i("div",K,[a[9]||(a[9]=i("label",{for:"password"},"Şifre",-1)),i("div",M,[d(i("input",{type:N.value?"text":"password",id:"password","onUpdate:modelValue":a[1]||(a[1]=e=>F.password=e),class:"form-control",required:"",placeholder:"******"},null,8,S),[[p,F.password]]),i("button",{type:"button",class:"password-toggle-btn",onClick:$},[i("i",{class:m(N.value?"bi bi-eye-slash":"bi bi-eye")},null,2)])])]),i("div",j,[d(i("input",{type:"checkbox",class:"form-check-input",id:"rememberMe","onUpdate:modelValue":a[2]||(a[2]=e=>F.rememberMe=e)},null,512),[[c,F.rememberMe]]),a[10]||(a[10]=i("label",{class:"form-check-label",for:"rememberMe"},"Beni hatırla",-1))]),i("button",{type:"submit",class:"btn btn-primary login-btn w-100",disabled:J.value},[J.value?(f(),s("span",L,a[11]||(a[11]=[i("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1),v(" Giriş yapılıyor... ")]))):(f(),s("span",C,"Giriş Yap"))],8,G)],32)),i("div",T,[i("a",{href:"#",onClick:n(ae,["prevent"])},o(Q.value?"Giriş Yap":"Kayıt Ol"),1),Q.value?t("",!0):(f(),s("a",{key:0,href:"#",onClick:n(ee,["prevent"])},"Şifremi Unuttum"))])])]),a[19]||(a[19]=i("div",{class:"login-version"},[i("span",null,"METS v2.0.0")],-1))]))}},[["__scopeId","data-v-58d963ad"]]);export{B as default};
